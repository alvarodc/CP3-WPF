<Window x:Class="CardPass3.WPF.Modules.Login.Views.DbConnectionErrorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Error de conexión a la base de datos"
        Width="460" Height="290"
        WindowStartupLocation="CenterOwner"
        WindowStyle="ToolWindow"
        ResizeMode="NoResize"
        Background="{StaticResource SurfaceBrush}">

    <Grid Margin="28">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Icono + título -->
        <StackPanel Grid.Row="0" Orientation="Horizontal">
            <TextBlock Text="&#xE814;"
                       FontFamily="Segoe MDL2 Assets"
                       FontSize="28"
                       Foreground="#E65100"
                       VerticalAlignment="Center"/>
            <StackPanel Margin="14,0,0,0">
                <TextBlock Text="No se puede conectar a la base de datos"
                           FontFamily="Segoe UI Semibold"
                           FontSize="14"
                           Foreground="{StaticResource TextPrimaryBrush}"/>
                <TextBlock Text="Se ha detectado un problema con la configuración de conexión."
                           FontFamily="Segoe UI"
                           FontSize="12"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,3,0,0"/>
            </StackPanel>
        </StackPanel>

        <!-- Separador -->
        <Border Grid.Row="1" BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0" Margin="0,6,0,0"/>

        <!-- Explicación -->
        <TextBlock Grid.Row="2"
                   TextWrapping="Wrap"
                   FontFamily="Segoe UI"
                   FontSize="12"
                   Foreground="{StaticResource TextPrimaryBrush}"
                   LineHeight="20">
            Esto puede deberse a que el fichero de configuración usa un formato
            de cifrado de una versión anterior, o a que los parámetros de conexión
            son incorrectos. Elige cómo deseas continuar:
        </TextBlock>

        <!-- Botones de acción -->
        <StackPanel Grid.Row="4" Orientation="Vertical" Margin="0,8,0,0">

            <Button Click="OnConfigure"
                    Height="36" HorizontalContentAlignment="Left"
                    Padding="14,0" Margin="0,0,0,6"
                    Style="{StaticResource Btn.Ghost}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE713;" FontFamily="Segoe MDL2 Assets"
                               FontSize="13" VerticalAlignment="Center"/>
                    <StackPanel Margin="10,0,0,0">
                        <TextBlock Text="Configurar conexión"
                                   FontFamily="Segoe UI Semibold" FontSize="12"
                                   Foreground="{StaticResource TextPrimaryBrush}"/>
                        <TextBlock Text="Abrir la pantalla de configuración de base de datos  (próximamente)"
                                   FontFamily="Segoe UI" FontSize="11"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Button>

            <Button Click="OnReset"
                    Height="36" HorizontalContentAlignment="Left"
                    Padding="14,0" Margin="0,0,0,6"
                    Style="{StaticResource Btn.Ghost}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE777;" FontFamily="Segoe MDL2 Assets"
                               FontSize="13" VerticalAlignment="Center"/>
                    <StackPanel Margin="10,0,0,0">
                        <TextBlock Text="Restablecer configuración por defecto"
                                   FontFamily="Segoe UI Semibold" FontSize="12"
                                   Foreground="{StaticResource TextPrimaryBrush}"/>
                        <TextBlock Text="localhost · cardpass3 / cardpass3 · puerto 3306"
                                   FontFamily="Segoe UI" FontSize="11"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                </StackPanel>
            </Button>

            <Button Click="OnBack"
                    Height="36" HorizontalContentAlignment="Left"
                    Padding="14,0"
                    Style="{StaticResource Btn.Ghost}">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="&#xE72B;" FontFamily="Segoe MDL2 Assets"
                               FontSize="13" VerticalAlignment="Center"/>
                    <TextBlock Text="Volver al inicio de sesión"
                               FontFamily="Segoe UI Semibold" FontSize="12"
                               Foreground="{StaticResource TextPrimaryBrush}"
                               Margin="10,0,0,0" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>

        </StackPanel>
    </Grid>
</Window>
